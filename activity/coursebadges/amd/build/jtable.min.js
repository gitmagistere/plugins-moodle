define(["jquery","jqueryui"],function(){!function(a){var b;a(window).on("beforeunload",function(){b=!0}),a(window).on("unload",function(){b=!1}),a.widget("hik.jtable",{options:{actions:{},fields:{},animationsEnabled:!0,defaultDateFormat:"yy-mm-dd",dialogShowEffect:"fade",dialogHideEffect:"fade",showCloseButton:!1,loadingAnimationDelay:500,saveUserPreferences:!0,jqueryuiTheme:!1,unAuthorizedRequestRedirectUrl:null,ajaxSettings:{type:"POST",dataType:"json"},toolbar:{hoverAnimation:!0,hoverAnimationDuration:60,hoverAnimationEasing:void 0,items:[]},closeRequested:function(a,b){},formCreated:function(a,b){},formSubmitting:function(a,b){},formClosed:function(a,b){},loadingRecords:function(a,b){},recordsLoaded:function(a,b){},rowInserted:function(a,b){},rowsRemoved:function(a,b){},messages:{serverCommunicationError:"An error occured while communicating to the server.",loadingMessage:"Loading records...",noDataAvailable:"No data available!",areYouSure:"Are you sure?",save:"Save",saving:"Saving",cancel:"Cancel",error:"Error",close:"Close",cannotLoadOptionsFor:"Can not load options for field {0}"}},_$mainContainer:null,_$titleDiv:null,_$toolbarDiv:null,_$table:null,_$tableBody:null,_$tableRows:null,_$busyDiv:null,_$busyMessageDiv:null,_$errorDialogDiv:null,_columnList:null,_fieldList:null,_keyField:null,_firstDataColumnOffset:0,_lastPostData:null,_cache:null,_create:function(){this._normalizeFieldsOptions(),this._initializeFields(),this._createFieldAndColumnList(),this._createMainContainer(),this._createTableTitle(),this._createToolBar(),this._createTable(),this._createBusyPanel(),this._createErrorDialogDiv(),this._addNoDataRow(),this._cookieKeyPrefix=this._generateCookieKeyPrefix()},_normalizeFieldsOptions:function(){var b=this;a.each(b.options.fields,function(a,c){b._normalizeFieldOptions(a,c)})},_normalizeFieldOptions:function(b,c){if(void 0==c.listClass&&(c.listClass=""),void 0==c.inputClass&&(c.inputClass=""),c.dependsOn&&"string"===a.type(c.dependsOn)){var d=c.dependsOn.split(",");c.dependsOn=[];for(var e=0;e<d.length;e++)c.dependsOn.push(a.trim(d[e]))}},_initializeFields:function(){this._lastPostData={},this._$tableRows=[],this._columnList=[],this._fieldList=[],this._cache=[]},_createFieldAndColumnList:function(){var b=this;a.each(b.options.fields,function(a,c){b._fieldList.push(a),1==c.key&&(b._keyField=a),0!=c.list&&"hidden"!=c.type&&b._columnList.push(a)})},_createMainContainer:function(){this._$mainContainer=a("<div />").addClass("jtable-main-container").appendTo(this.element),this._jqueryuiThemeAddClass(this._$mainContainer,"ui-widget")},_createTableTitle:function(){var b=this;if(b.options.title){var c=a("<div />").addClass("jtable-title").appendTo(b._$mainContainer);if(b._jqueryuiThemeAddClass(c,"ui-widget-header"),a("<div />").addClass("jtable-title-text").appendTo(c).append(b.options.title),b.options.showCloseButton){var d=a("<span />").html(b.options.messages.close);a("<button></button>").addClass("jtable-command-button jtable-close-button").attr("title",b.options.messages.close).append(d).appendTo(c).click(function(a){a.preventDefault(),a.stopPropagation(),b._onCloseRequested()})}b._$titleDiv=c}},_createTable:function(){this._$table=a("<table></table>").addClass("jtable").appendTo(this._$mainContainer),this.options.tableId&&this._$table.attr("id",this.options.tableId),this._jqueryuiThemeAddClass(this._$table,"ui-widget-content"),this._createTableHead(),this._createTableBody()},_createTableHead:function(){var b=a("<thead></thead>").appendTo(this._$table);this._addRowToTableHead(b)},_addRowToTableHead:function(b){b=a("<tr></tr>").appendTo(b),this._addColumnsToHeaderRow(b)},_addColumnsToHeaderRow:function(a){for(var b=0;b<this._columnList.length;b++){var c=this._columnList[b];this._createHeaderCellForField(c,this.options.fields[c]).appendTo(a)}},_createHeaderCellForField:function(b,c){c.width=c.width||"10%";var d=a("<span />").addClass("jtable-column-header-text").html(c.title),d=a("<div />").addClass("jtable-column-header-container").append(d),d=a("<th></th>").addClass("jtable-column-header").addClass(c.listClass).css("width",c.width).data("fieldName",b).append(d);return this._jqueryuiThemeAddClass(d,"ui-state-default"),d},_createEmptyCommandHeader:function(){var b=a("<th></th>").addClass("jtable-command-column-header").css("width","1%");return this._jqueryuiThemeAddClass(b,"ui-state-default"),b},_createTableBody:function(){this._$tableBody=a("<tbody></tbody>").appendTo(this._$table)},_createBusyPanel:function(){this._$busyMessageDiv=a("<div />").addClass("jtable-busy-message").prependTo(this._$mainContainer),this._$busyDiv=a("<div />").addClass("jtable-busy-panel-background").prependTo(this._$mainContainer),this._jqueryuiThemeAddClass(this._$busyMessageDiv,"ui-widget-header"),this._hideBusy()},_createErrorDialogDiv:function(){var b=this;b._$errorDialogDiv=a("<div></div>").appendTo(b._$mainContainer),b._$errorDialogDiv.dialog({autoOpen:!1,show:b.options.dialogShowEffect,hide:b.options.dialogHideEffect,modal:!0,title:b.options.messages.error,buttons:[{text:b.options.messages.close,click:function(){b._$errorDialogDiv.dialog("close")}}]})},load:function(a,b){this._lastPostData=a,this._reloadTable(b)},reload:function(a){this._reloadTable(a)},getRowByKey:function(a){for(var b=0;b<this._$tableRows.length;b++)if(a==this._getKeyValueOfRecord(this._$tableRows[b].data("record")))return this._$tableRows[b];return null},destroy:function(){this.element.empty(),a.Widget.prototype.destroy.call(this)},_setOption:function(a,b){},_reloadTable:function(b){var c=this,d=function(a){c._hideBusy(),"OK"!=a.Result?c._showError(a.Message):(c._removeAllRows("reloading"),c._addRecordsToTable(a.Records),c._onRecordsLoaded(a),b&&b())};if(c._showBusy(c.options.messages.loadingMessage,c.options.loadingAnimationDelay),c._onLoadingRecords(),a.isFunction(c.options.actions.listAction)){var e=c.options.actions.listAction(c._lastPostData,c._createJtParamsForLoading());c._isDeferredObject(e)?e.done(function(a){d(a)}).fail(function(){c._showError(c.options.messages.serverCommunicationError)}).always(function(){c._hideBusy()}):d(e)}else e=c._createRecordLoadUrl(),c._ajax({url:e,data:c._lastPostData,success:function(a){d(a)},error:function(){c._hideBusy(),c._showError(c.options.messages.serverCommunicationError)}})},_createRecordLoadUrl:function(){return this.options.actions.listAction},_createJtParamsForLoading:function(){return{}},_createRowFromRecord:function(b){return b=a("<tr></tr>").addClass("jtable-data-row").attr("data-record-key",this._getKeyValueOfRecord(b)).data("record",b),this._addCellsToRowUsingRecord(b),b},_addCellsToRowUsingRecord:function(a){for(var b=a.data("record"),c=0;c<this._columnList.length;c++)this._createCellForRecordField(b,this._columnList[c]).appendTo(a)},_createCellForRecordField:function(b,c){return a("<td></td>").addClass(this.options.fields[c].listClass).append(this._getDisplayTextForRecordField(b,c))},_addRecordsToTable:function(b){var c=this;a.each(b,function(a,b){c._addRow(c._createRowFromRecord(b))}),c._refreshRowStyles()},_addRowToTable:function(a,b,c,d){b={index:this._normalizeNumber(b,0,this._$tableRows.length,this._$tableRows.length)},1==c&&(b.isNewRow=!0),0==d&&(b.animationsEnabled=!1),this._addRow(a,b)},_addRow:function(b,c){c=a.extend({index:this._$tableRows.length,isNewRow:!1,animationsEnabled:!0},c),0>=this._$tableRows.length&&this._removeNoDataRow(),c.index=this._normalizeNumber(c.index,0,this._$tableRows.length,this._$tableRows.length),c.index==this._$tableRows.length?(this._$tableBody.append(b),this._$tableRows.push(b)):0==c.index?(this._$tableBody.prepend(b),this._$tableRows.unshift(b)):(this._$tableRows[c.index-1].after(b),this._$tableRows.splice(c.index,0,b)),this._onRowInserted(b,c.isNewRow),c.isNewRow&&(this._refreshRowStyles(),this.options.animationsEnabled&&c.animationsEnabled&&this._showNewRowAnimation(b))},_showNewRowAnimation:function(a){var b="jtable-row-created";this.options.jqueryuiTheme&&(b+=" ui-state-highlight"),a.addClass(b,"slow","",function(){a.removeClass(b,5e3)})},_removeRowsFromTable:function(b,c){var d=this;0>=b.length||(b.addClass("jtable-row-removed").remove(),b.each(function(){var b=d._findRowIndex(a(this));0<=b&&d._$tableRows.splice(b,1)}),d._onRowsRemoved(b,c),0==d._$tableRows.length&&d._addNoDataRow(),d._refreshRowStyles())},_findRowIndex:function(a){return this._findIndexInArray(a,this._$tableRows,function(a,b){return a.data("record")==b.data("record")})},_removeAllRows:function(a){if(!(0>=this._$tableRows.length)){var b=this._$tableBody.find("tr.jtable-data-row");this._$tableBody.empty(),this._$tableRows=[],this._onRowsRemoved(b,a),this._addNoDataRow()}},_addNoDataRow:function(){if(!(0<this._$tableBody.find(">tr.jtable-no-data-row").length)){var b=a("<tr></tr>").addClass("jtable-no-data-row").appendTo(this._$tableBody),c=this._$table.find("thead th").length;a("<td></td>").attr("colspan",c).html(this.options.messages.noDataAvailable).appendTo(b)}},_removeNoDataRow:function(){this._$tableBody.find(".jtable-no-data-row").remove()},_refreshRowStyles:function(){for(var a=0;a<this._$tableRows.length;a++)0==a%2?this._$tableRows[a].addClass("jtable-row-even"):this._$tableRows[a].removeClass("jtable-row-even")},_getDisplayTextForRecordField:function(a,b){var c=this.options.fields[b],d=a[b];return c.display?c.display({record:a}):"date"==c.type?this._getDisplayTextForDateRecordField(c,d):"checkbox"==c.type?this._getCheckBoxTextForFieldByValue(b,d):c.options?(c=this._getOptionsForField(b,{record:a,value:d,source:"list",dependedValues:this._createDependedValuesUsingRecord(a,c.dependsOn)}),this._findOptionByValue(c,d).DisplayText):d},_createDependedValuesUsingRecord:function(a,b){if(!b)return{};for(var c={},d=0;d<b.length;d++)c[b[d]]=a[b[d]];return c},_findOptionByValue:function(a,b){for(var c=0;c<a.length;c++)if(a[c].Value==b)return a[c];return{}},_getDisplayTextForDateRecordField:function(b,c){if(!c)return"";var d=b.displayFormat||this.options.defaultDateFormat,e=this._parseDate(c);return a.datepicker.formatDate(d,e)},_getOptionsForField:function(b,c){var d=this.options.fields[b],e=d.options;if(a.isFunction(e)&&(c=a.extend(!0,{_cacheCleared:!1,dependedValues:{},clearCache:function(){this._cacheCleared=!0}},c),e=e(c)),"string"==typeof e){var f="options_"+b+"_"+e;c._cacheCleared||!this._cache[f]?(this._cache[f]=this._buildOptionsFromArray(this._downloadOptions(b,e)),this._sortFieldOptions(this._cache[f],d.optionsSorting)):void 0!=c.value&&void 0==this._findOptionByValue(this._cache[f],c.value).DisplayText&&(this._cache[f]=this._buildOptionsFromArray(this._downloadOptions(b,e)),this._sortFieldOptions(this._cache[f],d.optionsSorting)),e=this._cache[f]}else e=jQuery.isArray(e)?this._buildOptionsFromArray(e):this._buildOptionsArrayFromObject(e),this._sortFieldOptions(e,d.optionsSorting);return e},_downloadOptions:function(a,b){var c=this,d=[];return c._ajax({url:b,async:!1,success:function(a){"OK"!=a.Result?c._showError(a.Message):d=a.Options},error:function(){var b=c._formatString(c.options.messages.cannotLoadOptionsFor,a);c._showError(b)}}),d},_sortFieldOptions:function(b,c){if(b&&b.length&&c){var d;d=0==c.indexOf("value")?function(a){return a.Value}:function(a){return a.DisplayText};var e;e="string"==a.type(d(b[0]))?function(a,b){return d(a).localeCompare(d(b))}:function(a,b){return d(a)-d(b)},0<c.indexOf("desc")?b.sort(function(a,b){return e(b,a)}):b.sort(function(a,b){return e(a,b)})}},_buildOptionsArrayFromObject:function(b){var c=[];return a.each(b,function(a,b){c.push({Value:a,DisplayText:b})}),c},_buildOptionsFromArray:function(b){for(var c=[],d=0;d<b.length;d++)a.isPlainObject(b[d])?c.push(b[d]):c.push({Value:b[d],DisplayText:b[d]});return c},_parseDate:function(a){return 0<=a.indexOf("Date")?new Date(parseInt(a.substr(6),10)):10==a.length?new Date(parseInt(a.substr(0,4),10),parseInt(a.substr(5,2),10)-1,parseInt(a.substr(8,2),10)):19==a.length?new Date(parseInt(a.substr(0,4),10),parseInt(a.substr(5,2),10)-1,parseInt(a.substr(8,2,10)),parseInt(a.substr(11,2),10),parseInt(a.substr(14,2),10),parseInt(a.substr(17,2),10)):(this._logWarn("Given date is not properly formatted: "+a),"format error!")},_createToolBar:function(){this._$toolbarDiv=a("<div />").addClass("jtable-toolbar").appendTo(this._$titleDiv);for(var b=0;b<this.options.toolbar.items.length;b++)this._addToolBarItem(this.options.toolbar.items[b])},_addToolBarItem:function(b){if(void 0==b||void 0==b.text&&void 0==b.icon)return this._logWarn("Can not add tool bar item since it is not valid!"),this._logWarn(b),null;var c=a("<span></span>").addClass("jtable-toolbar-item").appendTo(this._$toolbarDiv);if(this._jqueryuiThemeAddClass(c,"ui-widget ui-state-default ui-corner-all","ui-state-hover"),b.cssClass&&c.addClass(b.cssClass),b.tooltip&&c.attr("title",b.tooltip),b.icon){var d=a('<span class="jtable-toolbar-item-icon"></span>').appendTo(c);!0!==b.icon&&a.type("string"===b.icon)&&d.css("background",'url("'+b.icon+'")')}b.text&&a('<span class=""></span>').html(b.text).addClass("jtable-toolbar-item-text").appendTo(c),b.click&&c.click(function(){b.click()});var e=void 0,f=void 0;return this.options.toolbar.hoverAnimation&&(e=this.options.toolbar.hoverAnimationDuration,f=this.options.toolbar.hoverAnimationEasing),c.hover(function(){c.addClass("jtable-toolbar-item-hover",e,f)},function(){c.removeClass("jtable-toolbar-item-hover",e,f)}),c},_showError:function(a){this._$errorDialogDiv.html(a).dialog("open")},_setBusyTimer:null,_showBusy:function(a,b){var c=this;c._$busyDiv.width(c._$mainContainer.width()).height(c._$mainContainer.height()).addClass("jtable-busy-panel-background-invisible").show();var d=function(){c._$busyDiv.removeClass("jtable-busy-panel-background-invisible"),c._$busyMessageDiv.html(a).show()};b?c._setBusyTimer||(c._setBusyTimer=setTimeout(d,b)):d()},_hideBusy:function(){clearTimeout(this._setBusyTimer),this._setBusyTimer=null,this._$busyDiv.hide(),this._$busyMessageDiv.html("").hide()},_isBusy:function(){return this._$busyMessageDiv.is(":visible")},_jqueryuiThemeAddClass:function(a,b,c){this.options.jqueryuiTheme&&(a.addClass(b),c&&a.hover(function(){a.addClass(c)},function(){a.removeClass(c)}))},_performAjaxCall:function(a,b,c,d,e){this._ajax({url:a,data:b,async:c,success:d,error:e})},_unAuthorizedRequestHandler:function(){this.options.unAuthorizedRequestRedirectUrl?location.href=this.options.unAuthorizedRequestRedirectUrl:location.reload(!0)},_ajax:function(c){var d=this,e={statusCode:{401:function(){d._unAuthorizedRequestHandler()}}},e=a.extend(e,this.options.ajaxSettings,c);e.success=function(a){a&&1==a.UnAuthorizedRequest&&d._unAuthorizedRequestHandler(),c.success&&c.success(a)},e.error=function(a,d,e){b?a.abort():c.error&&c.error(arguments)},e.complete=function(){c.complete&&c.complete()},a.ajax(e)},_getKeyValueOfRecord:function(a){return a[this._keyField]},_setCookie:function(a,b){a=this._cookieKeyPrefix+a;var c=new Date;c.setDate(c.getDate()+30),document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+"; expires="+c.toUTCString()},_getCookie:function(a){a=this._cookieKeyPrefix+a;for(var b=document.cookie.split("; "),c=0;c<b.length;c++)if(b[c]){var d=b[c].split("=");if(2==d.length&&decodeURIComponent(d[0])===a)return decodeURIComponent(d[1]||"")}return null},_generateCookieKeyPrefix:function(){var a="";this.options.tableId&&(a=a+this.options.tableId+"#"),a=a+this._columnList.join("$")+"#c"+this._$table.find("thead th").length;var b=0;if(0!=a.length)for(var c=0;c<a.length;c++)var d=a.charCodeAt(c),b=(b<<5)-b+d,b=b&b;return"jtable#"+b},_onLoadingRecords:function(){this._trigger("loadingRecords",null,{})},_onRecordsLoaded:function(a){this._trigger("recordsLoaded",null,{records:a.Records,serverResponse:a})},_onRowInserted:function(a,b){this._trigger("rowInserted",null,{row:a,record:a.data("record"),isNewRow:b})},_onRowsRemoved:function(a,b){this._trigger("rowsRemoved",null,{rows:a,reason:b})},_onCloseRequested:function(){this._trigger("closeRequested",null,{})}})}(jQuery),function(a){a.extend(!0,a.hik.jtable.prototype,{_getPropertyOfObject:function(a,b){if(0>b.indexOf("."))return a[b];var c=b.substring(0,b.indexOf(".")),d=b.substring(b.indexOf(".")+1);return this._getPropertyOfObject(a[c],d)},_setPropertyOfObject:function(a,b,c){if(0>b.indexOf("."))a[b]=c;else{var d=b.substring(0,b.indexOf("."));b=b.substring(b.indexOf(".")+1),this._setPropertyOfObject(a[d],b,c)}},_insertToArrayIfDoesNotExists:function(b,c){0>a.inArray(c,b)&&b.push(c)},_findIndexInArray:function(a,b,c){c||(c=function(a,b){return a==b});for(var d=0;d<b.length;d++)if(c(a,b[d]))return d;return-1},_normalizeNumber:function(a,b,c,d){return void 0==a||null==a||isNaN(a)?d:a<b?b:a>c?c:a},_formatString:function(){if(0==arguments.length)return null;for(var a=arguments[0],b=1;b<arguments.length;b++)a=a.replace("{"+(b-1)+"}",arguments[b]);return a},_isDeferredObject:function(a){return a.then&&a.done&&a.fail},_logDebug:function(a){window.console&&console.log("jTable DEBUG: "+a)},_logInfo:function(a){window.console&&console.log("jTable INFO: "+a)},_logWarn:function(a){window.console&&console.log("jTable WARNING: "+a)},_logError:function(a){window.console&&console.log("jTable ERROR: "+a)}}),Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c=this.length,d=Number(b)||0,d=0>d?Math.ceil(d):Math.floor(d);for(0>d&&(d+=c);d<c;d++)if(d in this&&this[d]===a)return d;return-1})}(jQuery),function(a){a.extend(!0,a.hik.jtable.prototype,{_submitFormUsingAjax:function(a,b,c,d){this._ajax({url:a,data:b,success:c,error:d})},_createInputLabelForRecordField:function(b){return a("<div />").addClass("jtable-input-label").html(this.options.fields[b].inputTitle||this.options.fields[b].title)},_createInputForRecordField:function(b){var c=b.fieldName,d=b.value,e=b.record,f=b.formType;b=b.form;var g=this.options.fields[c];return void 0!=d&&null!=d||(d=g.defaultValue),g.input?(d=a(g.input({value:d,record:e,formType:f,form:b})),d.attr("id")||d.attr("id","Edit-"+c),a("<div />").addClass("jtable-input jtable-custom-input").append(d)):"date"==g.type?this._createDateInputForField(g,c,d):"textarea"==g.type?this._createTextAreaForField(g,c,d):"password"==g.type?this._createPasswordInputForField(g,c,d):"checkbox"==g.type?this._createCheckboxForField(g,c,d):g.options?"radiobutton"==g.type?this._createRadioButtonListForField(g,c,d,e,f):this._createDropDownListForField(g,c,d,e,f,b):this._createTextInputForField(g,c,d)},_createInputForHidden:function(b,c){return void 0==c&&(c=""),a('<input type="hidden" name="'+b+'" id="Edit-'+b+'"></input>').val(c)},_createDateInputForField:function(b,c,d){return c=a('<input class="'+b.inputClass+'" id="Edit-'+c+'" type="text" name="'+c+'"></input>'),void 0!=d&&c.val(d),c.datepicker({dateFormat:b.displayFormat||this.options.defaultDateFormat}),a("<div />").addClass("jtable-input jtable-date-input").append(c)},_createTextAreaForField:function(b,c,d){return b=a('<textarea class="'+b.inputClass+'" id="Edit-'+c+'" name="'+c+'"></textarea>'),void 0!=d&&b.val(d),a("<div />").addClass("jtable-input jtable-textarea-input").append(b)},_createTextInputForField:function(b,c,d){return b=a('<input class="'+b.inputClass+'" id="Edit-'+c+'" type="text" name="'+c+'"></input>'),void 0!=d&&b.val(d),a("<div />").addClass("jtable-input jtable-text-input").append(b)},_createPasswordInputForField:function(b,c,d){return b=a('<input class="'+b.inputClass+'" id="Edit-'+c+'" type="password" name="'+c+'"></input>'),void 0!=d&&b.val(d),a("<div />").addClass("jtable-input jtable-password-input").append(b)},_createCheckboxForField:function(b,c,d){var e=this;void 0==d&&(d=e._getCheckBoxPropertiesForFieldByState(c,!1).Value);var f=a("<div />").addClass("jtable-input jtable-checkbox-input"),g=a('<input class="'+b.inputClass+'" id="Edit-'+c+'" type="checkbox" name="'+c+'" />').appendTo(f);void 0!=d&&g.val(d);var h=a("<span>"+(b.formText||e._getCheckBoxTextForFieldByValue(c,d))+"</span>").appendTo(f);e._getIsCheckBoxSelectedForFieldByValue(c,d)&&g.attr("checked","checked");var i=function(){var a=e._getCheckBoxPropertiesForFieldByState(c,g.is(":checked"));g.attr("value",a.Value),h.html(b.formText||a.DisplayText)};return g.click(function(){i()}),0!=b.setOnTextClick&&h.addClass("jtable-option-text-clickable").click(function(){g.is(":checked")?g.attr("checked",!1):g.attr("checked",!0),i()}),f},_createDropDownListForField:function(b,c,d,e,f,g){var h=a("<div />").addClass("jtable-input jtable-dropdown-input"),i=a('<select class="'+b.inputClass+'" id="Edit-'+c+'" name="'+c+'"></select>').appendTo(h);return b=this._getOptionsForField(c,{record:e,source:f,form:g,dependedValues:this._createDependedValuesUsingForm(g,b.dependsOn)}),this._fillDropDownListWithOptions(i,b,d),h},_fillDropDownListWithOptions:function(b,c,d){b.empty();for(var e=0;e<c.length;e++)a("<option"+(c[e].Value==d?' selected="selected"':"")+">"+c[e].DisplayText+"</option>").val(c[e].Value).appendTo(b)},_createDependedValuesUsingForm:function(a,b){if(!b)return{};for(var c={},d=0;d<b.length;d++){var e=b[d],f=a.find("select[name="+e+"]");0>=f.length||(c[e]=f.val())}return c},_createRadioButtonListForField:function(b,c,d,e,f){var g=a("<div />").addClass("jtable-input jtable-radiobuttonlist-input");return e=this._getOptionsForField(c,{record:e,source:f}),a.each(e,function(e,f){var h=a('<div class=""></div>').addClass("jtable-radio-input").appendTo(g),i=a('<input type="radio" id="Edit-'+c+"-"+e+'" class="'+b.inputClass+'" name="'+c+'"'+(f.Value==d+""?' checked="true"':"")+" />").val(f.Value).appendTo(h),h=a("<span></span>").html(f.DisplayText).appendTo(h);0!=b.setOnTextClick&&h.addClass("jtable-option-text-clickable").click(function(){i.is(":checked")||i.attr("checked",!0)})}),g},_getCheckBoxTextForFieldByValue:function(a,b){return this.options.fields[a].values[b]},_getIsCheckBoxSelectedForFieldByValue:function(a,b){return this._createCheckBoxStateArrayForFieldWithCaching(a)[1].Value.toString()==b.toString()},_getCheckBoxPropertiesForFieldByState:function(a,b){return this._createCheckBoxStateArrayForFieldWithCaching(a)[b?1:0]},_createCheckBoxStateArrayForFieldWithCaching:function(a){var b="checkbox_"+a;return this._cache[b]||(this._cache[b]=this._createCheckBoxStateArrayForField(a)),this._cache[b]},_createCheckBoxStateArrayForField:function(b){var c=[],d=0;return a.each(this.options.fields[b].values,function(a,b){2>d++&&c.push({Value:a,DisplayText:b})}),c},_makeCascadeDropDowns:function(b,c,d){var e=this;b.find("select").each(function(){var f=a(this),g=f.attr("name");if(g){var h=e.options.fields[g];h.dependsOn&&a.each(h.dependsOn,function(a,i){b.find("select[name="+i+"]").change(function(){var a={record:c,source:d,form:b,dependedValues:{}};a.dependedValues=e._createDependedValuesUsingForm(b,h.dependsOn),a=e._getOptionsForField(g,a),e._fillDropDownListWithOptions(f,a,void 0),f.change()})})}})},_updateRecordValuesFromForm:function(b,c){for(var d=0;d<this._fieldList.length;d++){var e=this._fieldList[d],f=this.options.fields[e];if(0!=f.edit){var g=c.find('[name="'+e+'"]');if(!(0>=g.length))if("date"==f.type)if(g=g.val()){f=f.displayFormat||this.options.defaultDateFormat;try{var h=a.datepicker.parseDate(f,g);b[e]="/Date("+h.getTime()+")/"}catch(i){this._logWarn("Date format is incorrect for field "+e+": "+g),b[e]=void 0}}else this._logDebug("Date is empty for "+e),b[e]=void 0;else f.options&&"radiobutton"==f.type?(f=g.filter(":checked"),b[e]=f.length?f.val():void 0):b[e]=g.val()}}},_setEnabledOfDialogButton:function(a,b,c){a&&(0!=b?a.removeAttr("disabled").removeClass("ui-state-disabled"):a.attr("disabled","disabled").addClass("ui-state-disabled"),c&&a.find("span").text(c))}})}(jQuery),function(a){var b=a.hik.jtable.prototype._create;a.extend(!0,a.hik.jtable.prototype,{options:{recordAdded:function(a,b){},messages:{addNewRecord:"Add new record"}},_$addRecordDiv:null,_create:function(){b.apply(this,arguments),this.options.actions.createAction&&this._createAddRecordDialogDiv()},_createAddRecordDialogDiv:function(){var b=this;b._$addRecordDiv=a("<div />").appendTo(b._$mainContainer),b._$addRecordDiv.dialog({autoOpen:!1,show:b.options.dialogShowEffect,hide:b.options.dialogHideEffect,width:"auto",minWidth:"300",modal:!0,title:b.options.messages.addNewRecord,buttons:[{text:b.options.messages.cancel,click:function(){b._$addRecordDiv.dialog("close")}},{id:"AddRecordDialogSaveButton",text:b.options.messages.save,click:function(){b._onSaveClickedOnCreateForm()}}],close:function(){var a=b._$addRecordDiv.find("form").first(),c=b._$addRecordDiv.parent().find("#AddRecordDialogSaveButton");b._trigger("formClosed",null,{form:a,formType:"create"}),b._setEnabledOfDialogButton(c,!0,b.options.messages.save),a.remove()}}),b.options.addRecordButton?b.options.addRecordButton.click(function(a){a.preventDefault(),b._showAddRecordForm()}):b._addToolBarItem({icon:!0,cssClass:"jtable-toolbar-item-add-record",text:b.options.messages.addNewRecord,click:function(){b._showAddRecordForm()}})},_onSaveClickedOnCreateForm:function(){var a=this._$addRecordDiv.parent().find("#AddRecordDialogSaveButton"),b=this._$addRecordDiv.find("form");0!=this._trigger("formSubmitting",null,{form:b,formType:"create"})&&(this._setEnabledOfDialogButton(a,!1,this.options.messages.saving),this._saveAddRecordForm(b,a))},showCreateForm:function(){this._showAddRecordForm()},addRecord:function(b){var c=this;if(b=a.extend({clientOnly:!1,animationsEnabled:c.options.animationsEnabled,success:function(){},error:function(){}},b),b.record)if(b.clientOnly)c._addRow(c._createRowFromRecord(b.record),{isNewRow:!0,animationsEnabled:b.animationsEnabled}),b.success();else{var d=function(a){"OK"!=a.Result?(c._showError(a.Message),b.error(a)):a.Record?(c._onRecordAdded(a),c._addRow(c._createRowFromRecord(a.Record),{isNewRow:!0,animationsEnabled:b.animationsEnabled}),b.success(a)):(c._logError("Server must return the created Record object."),b.error(a))};if(!b.url&&a.isFunction(c.options.actions.createAction)){var e=c.options.actions.createAction(a.param(b.record));c._isDeferredObject(e)?e.done(function(a){d(a)}).fail(function(){c._showError(c.options.messages.serverCommunicationError),b.error()}):d(e)}else c._submitFormUsingAjax(b.url||c.options.actions.createAction,a.param(b.record),function(a){d(a)},function(){c._showError(c.options.messages.serverCommunicationError),b.error()})}else c._logWarn("options parameter in addRecord method must contain a record property.")},_showAddRecordForm:function(){for(var b=this,c=a('<form id="jtable-create-form" class="jtable-dialog-form jtable-create-form"></form>'),d=0;d<b._fieldList.length;d++){var e=b._fieldList[d],f=b.options.fields[e];1==f.key&&1!=f.create||0==f.create||("hidden"==f.type?c.append(b._createInputForHidden(e,f.defaultValue)):(f=a("<div />").addClass("jtable-input-field-container").appendTo(c),f.append(b._createInputLabelForRecordField(e)),f.append(b._createInputForRecordField({fieldName:e,formType:"create",form:c}))))}b._makeCascadeDropDowns(c,void 0,"create"),c.submit(function(){return b._onSaveClickedOnCreateForm(),!1}),b._$addRecordDiv.append(c).dialog("open"),b._trigger("formCreated",null,{form:c,formType:"create"})},_saveAddRecordForm:function(b,c){var d=this,e=function(a){"OK"!=a.Result?(d._showError(a.Message),d._setEnabledOfDialogButton(c,!0,d.options.messages.save)):a.Record?(d._onRecordAdded(a),d._addRow(d._createRowFromRecord(a.Record),{isNewRow:!0}),d._$addRecordDiv.dialog("close")):(d._logError("Server must return the created Record object."),d._setEnabledOfDialogButton(c,!0,d.options.messages.save))};if(b.data("submitting",!0),a.isFunction(d.options.actions.createAction)){var f=d.options.actions.createAction(b.serialize());d._isDeferredObject(f)?f.done(function(a){e(a)}).fail(function(){d._showError(d.options.messages.serverCommunicationError),d._setEnabledOfDialogButton(c,!0,d.options.messages.save)}):e(f)}else d._submitFormUsingAjax(d.options.actions.createAction,b.serialize(),function(a){e(a)},function(){d._showError(d.options.messages.serverCommunicationError),d._setEnabledOfDialogButton(c,!0,d.options.messages.save)})},_onRecordAdded:function(a){this._trigger("recordAdded",null,{record:a.Record,serverResponse:a})}})}(jQuery),function(a){var b=a.hik.jtable.prototype._create,c=a.hik.jtable.prototype._addColumnsToHeaderRow,d=a.hik.jtable.prototype._addCellsToRowUsingRecord;a.extend(!0,a.hik.jtable.prototype,{options:{recordUpdated:function(a,b){},rowUpdated:function(a,b){},messages:{editRecord:"Edit Record"}},_$editDiv:null,_$editingRow:null,_create:function(){b.apply(this,arguments),this.options.actions.updateAction&&this._createEditDialogDiv()},_createEditDialogDiv:function(){var b=this;b._$editDiv=a("<div></div>").appendTo(b._$mainContainer),b._$editDiv.dialog({autoOpen:!1,show:b.options.dialogShowEffect,hide:b.options.dialogHideEffect,width:"auto",minWidth:"300",modal:!0,title:b.options.messages.editRecord,buttons:[{text:b.options.messages.cancel,click:function(){b._$editDiv.dialog("close")}},{id:"EditDialogSaveButton",text:b.options.messages.save,click:function(){b._onSaveClickedOnEditForm()}}],close:function(){var a=b._$editDiv.find("form:first"),c=b._$editDiv.parent().find("#EditDialogSaveButton");b._trigger("formClosed",null,{form:a,formType:"edit",row:b._$editingRow}),b._setEnabledOfDialogButton(c,!0,b.options.messages.save),a.remove()}})},_onSaveClickedOnEditForm:function(){if(this._$editingRow.hasClass("jtable-row-removed"))this._$editDiv.dialog("close");else{var a=this._$editDiv.parent().find("#EditDialogSaveButton"),b=this._$editDiv.find("form");0!=this._trigger("formSubmitting",null,{form:b,formType:"edit",row:this._$editingRow})&&(this._setEnabledOfDialogButton(a,!1,this.options.messages.saving),this._saveEditForm(b,a))}},updateRecord:function(b){var c=this;if(b=a.extend({clientOnly:!1,animationsEnabled:c.options.animationsEnabled,success:function(){},error:function(){}},b),b.record){var d=c._getKeyValueOfRecord(b.record);if(void 0==d||null==d)c._logWarn("options parameter in updateRecord method must contain a record that contains the key field property.");else{var e=c.getRowByKey(d);if(null==e)c._logWarn('Can not found any row by key "'+d+'" on the table. Updating row must be visible on the table.');else if(b.clientOnly)a.extend(e.data("record"),b.record),c._updateRowTexts(e),c._onRecordUpdated(e,null),b.animationsEnabled&&c._showUpdateAnimationForRow(e),b.success();else{var f=function(d){"OK"!=d.Result?(c._showError(d.Message),b.error(d)):(a.extend(e.data("record"),b.record),c._updateRecordValuesFromServerResponse(e.data("record"),d),c._updateRowTexts(e),c._onRecordUpdated(e,d),b.animationsEnabled&&c._showUpdateAnimationForRow(e),b.success(d))};!b.url&&a.isFunction(c.options.actions.updateAction)?(d=c.options.actions.updateAction(a.param(b.record)),c._isDeferredObject(d)?d.done(function(a){f(a)}).fail(function(){c._showError(c.options.messages.serverCommunicationError),b.error()}):f(d)):c._submitFormUsingAjax(b.url||c.options.actions.updateAction,a.param(b.record),function(a){f(a)},function(){c._showError(c.options.messages.serverCommunicationError),b.error()})}}}else c._logWarn("options parameter in updateRecord method must contain a record property.")},_addColumnsToHeaderRow:function(a){c.apply(this,arguments),void 0!=this.options.actions.updateAction&&a.append(this._createEmptyCommandHeader())},_addCellsToRowUsingRecord:function(b){var c=this;if(d.apply(this,arguments),void 0!=c.options.actions.updateAction){var e=a("<span></span>").html(c.options.messages.editRecord),e=a('<button title="'+c.options.messages.editRecord+'"></button>').addClass("jtable-command-button jtable-edit-command-button").append(e).click(function(a){a.preventDefault(),a.stopPropagation(),c._showEditForm(b)});a("<td></td>").addClass("jtable-command-column").append(e).appendTo(b)}},_showEditForm:function(b){for(var c=this,d=b.data("record"),e=a('<form id="jtable-edit-form" class="jtable-dialog-form jtable-edit-form"></form>'),f=0;f<c._fieldList.length;f++){var g=c._fieldList[f],h=c.options.fields[g],i=d[g];if(1==h.key){
if(1!=h.edit){e.append(c._createInputForHidden(g,i));continue}e.append(c._createInputForHidden("jtRecordKey",i))}0!=h.edit&&("hidden"==h.type?e.append(c._createInputForHidden(g,i)):(h=a('<div class="jtable-input-field-container"></div>').appendTo(e),h.append(c._createInputLabelForRecordField(g)),i=c._getValueForRecordField(d,g),h.append(c._createInputForRecordField({fieldName:g,value:i,record:d,formType:"edit",form:e}))))}c._makeCascadeDropDowns(e,d,"edit"),e.submit(function(){return c._onSaveClickedOnEditForm(),!1}),c._$editingRow=b,c._$editDiv.append(e).dialog("open"),c._trigger("formCreated",null,{form:e,formType:"edit",record:d,row:b})},_saveEditForm:function(b,c){var d=this,e=function(a){if("OK"!=a.Result)d._showError(a.Message),d._setEnabledOfDialogButton(c,!0,d.options.messages.save);else{var e=d._$editingRow.data("record");d._updateRecordValuesFromForm(e,b),d._updateRecordValuesFromServerResponse(e,a),d._updateRowTexts(d._$editingRow),d._$editingRow.attr("data-record-key",d._getKeyValueOfRecord(e)),d._onRecordUpdated(d._$editingRow,a),d.options.animationsEnabled&&d._showUpdateAnimationForRow(d._$editingRow),d._$editDiv.dialog("close")}};if(a.isFunction(d.options.actions.updateAction)){var f=d.options.actions.updateAction(b.serialize());d._isDeferredObject(f)?f.done(function(a){e(a)}).fail(function(){d._showError(d.options.messages.serverCommunicationError),d._setEnabledOfDialogButton(c,!0,d.options.messages.save)}):e(f)}else d._submitFormUsingAjax(d.options.actions.updateAction,b.serialize(),function(a){e(a)},function(){d._showError(d.options.messages.serverCommunicationError),d._setEnabledOfDialogButton(c,!0,d.options.messages.save)})},_updateRecordValuesFromServerResponse:function(b,c){c&&c.Record&&a.extend(!0,b,c.Record)},_getValueForRecordField:function(a,b){var c=this.options.fields[b],d=a[b];return"date"==c.type?this._getDisplayTextForDateRecordField(c,d):d},_updateRowTexts:function(a){for(var b=a.data("record"),c=a.find("td"),d=0;d<this._columnList.length;d++){var e=this._getDisplayTextForRecordField(b,this._columnList[d]);""!=e&&0==e&&(e="0"),c.eq(this._firstDataColumnOffset+d).html(e||"")}this._onRowUpdated(a)},_showUpdateAnimationForRow:function(a){var b="jtable-row-updated";this.options.jqueryuiTheme&&(b+=" ui-state-highlight"),a.stop(!0,!0).addClass(b,"slow","",function(){a.removeClass(b,5e3)})},_onRowUpdated:function(a){this._trigger("rowUpdated",null,{row:a,record:a.data("record")})},_onRecordUpdated:function(a,b){this._trigger("recordUpdated",null,{record:a.data("record"),row:a,serverResponse:b})}})}(jQuery),function(a){var b=a.hik.jtable.prototype._create,c=a.hik.jtable.prototype._addColumnsToHeaderRow,d=a.hik.jtable.prototype._addCellsToRowUsingRecord;a.extend(!0,a.hik.jtable.prototype,{options:{deleteConfirmation:!0,recordDeleted:function(a,b){},messages:{deleteConfirmation:"This record will be deleted. Are you sure?",deleteText:"Delete",deleting:"Deleting",canNotDeletedRecords:"Can not delete {0} of {1} records!",deleteProggress:"Deleting {0} of {1} records, processing..."}},_$deleteRecordDiv:null,_$deletingRow:null,_create:function(){b.apply(this,arguments),this._createDeleteDialogDiv()},_createDeleteDialogDiv:function(){var b=this;b.options.actions.deleteAction&&(b._$deleteRecordDiv=a('<div><p><span class="ui-icon ui-icon-alert" style="float:left; margin:0 7px 20px 0;"></span><span class="jtable-delete-confirm-message"></span></p></div>').appendTo(b._$mainContainer),b._$deleteRecordDiv.dialog({autoOpen:!1,show:b.options.dialogShowEffect,hide:b.options.dialogHideEffect,modal:!0,title:b.options.messages.areYouSure,buttons:[{text:b.options.messages.cancel,click:function(){b._$deleteRecordDiv.dialog("close")}},{id:"DeleteDialogButton",text:b.options.messages.deleteText,click:function(){if(b._$deletingRow.hasClass("jtable-row-removed"))b._$deleteRecordDiv.dialog("close");else{var a=b._$deleteRecordDiv.parent().find("#DeleteDialogButton");b._setEnabledOfDialogButton(a,!1,b.options.messages.deleting),b._deleteRecordFromServer(b._$deletingRow,function(){b._removeRowsFromTableWithAnimation(b._$deletingRow),b._$deleteRecordDiv.dialog("close")},function(c){b._showError(c),b._setEnabledOfDialogButton(a,!0,b.options.messages.deleteText)})}}}],close:function(){var a=b._$deleteRecordDiv.parent().find("#DeleteDialogButton");b._setEnabledOfDialogButton(a,!0,b.options.messages.deleteText)}}))},deleteRows:function(b){var c=this;if(0>=b.length)c._logWarn("No rows specified to jTable deleteRows method.");else if(c._isBusy())c._logWarn("Can not delete rows since jTable is busy!");else if(1==b.length)c._deleteRecordFromServer(b,function(){c._removeRowsFromTableWithAnimation(b)},function(a){c._showError(a)});else{c._showBusy(c._formatString(c.options.messages.deleteProggress,0,b.length));var d=0,e=function(){var a=b.filter(".jtable-row-ready-to-remove");a.length<b.length&&c._showError(c._formatString(c.options.messages.canNotDeletedRecords,b.length-a.length,b.length)),0<a.length&&c._removeRowsFromTableWithAnimation(a),c._hideBusy()},f=0;b.each(function(){var g=a(this);c._deleteRecordFromServer(g,function(){++f,++d,g.addClass("jtable-row-ready-to-remove"),c._showBusy(c._formatString(c.options.messages.deleteProggress,f,b.length)),d>=b.length&&e()},function(){++d,d>=b.length&&e()})})}},deleteRecord:function(b){var c=this;if(b=a.extend({clientOnly:!1,animationsEnabled:c.options.animationsEnabled,url:c.options.actions.deleteAction,success:function(){},error:function(){}},b),void 0==b.key)c._logWarn("options parameter in deleteRecord method must contain a key property.");else{var d=c.getRowByKey(b.key);null==d?c._logWarn("Can not found any row by key: "+b.key):b.clientOnly?(c._removeRowsFromTableWithAnimation(d,b.animationsEnabled),b.success()):c._deleteRecordFromServer(d,function(a){c._removeRowsFromTableWithAnimation(d,b.animationsEnabled),b.success(a)},function(a){c._showError(a),b.error(a)},b.url)}},_addColumnsToHeaderRow:function(a){c.apply(this,arguments),void 0!=this.options.actions.deleteAction&&a.append(this._createEmptyCommandHeader())},_addCellsToRowUsingRecord:function(b){d.apply(this,arguments);var c=this;if(void 0!=c.options.actions.deleteAction){var e=a("<span></span>").html(c.options.messages.deleteText),e=a('<button title="'+c.options.messages.deleteText+'"></button>').addClass("jtable-command-button jtable-delete-command-button").append(e).click(function(a){a.preventDefault(),a.stopPropagation(),c._deleteButtonClickedForRow(b)});a("<td></td>").addClass("jtable-command-column").append(e).appendTo(b)}},_deleteButtonClickedForRow:function(b){var c,d=this,e=d.options.messages.deleteConfirmation;if(a.isFunction(d.options.deleteConfirmation)){if(c={row:b,record:b.data("record"),deleteConfirm:!0,deleteConfirmMessage:e,cancel:!1,cancelMessage:null},d.options.deleteConfirmation(c),c.cancel)return void(c.cancelMessage&&d._showError(c.cancelMessage));e=c.deleteConfirmMessage,c=c.deleteConfirm}else c=d.options.deleteConfirmation;0!=c?(d._$deleteRecordDiv.find(".jtable-delete-confirm-message").html(e),d._showDeleteDialog(b)):d._deleteRecordFromServer(b,function(){d._removeRowsFromTableWithAnimation(b)},function(a){d._showError(a)})},_showDeleteDialog:function(a){this._$deletingRow=a,this._$deleteRecordDiv.dialog("open")},_deleteRecordFromServer:function(b,c,d,e){var f=this,g=function(a){"OK"!=a.Result?(b.data("deleting",!1),d&&d(a.Message)):(f._trigger("recordDeleted",null,{record:b.data("record"),row:b,serverResponse:a}),c&&c(a))};if(1!=b.data("deleting")){b.data("deleting",!0);var h={};h[f._keyField]=f._getKeyValueOfRecord(b.data("record")),!e&&a.isFunction(f.options.actions.deleteAction)?(e=f.options.actions.deleteAction(h),f._isDeferredObject(e)?e.done(function(a){g(a)}).fail(function(){b.data("deleting",!1),d&&d(f.options.messages.serverCommunicationError)}):g(e)):this._ajax({url:e||f.options.actions.deleteAction,data:h,success:function(a){g(a)},error:function(){b.data("deleting",!1),d&&d(f.options.messages.serverCommunicationError)}})}},_removeRowsFromTableWithAnimation:function(a,b){var c=this;if(void 0==b&&(b=c.options.animationsEnabled),b){var d="jtable-row-deleting";this.options.jqueryuiTheme&&(d+=" ui-state-disabled"),a.stop(!0,!0).addClass(d,"slow","").promise().done(function(){c._removeRowsFromTable(a,"deleted")})}else c._removeRowsFromTable(a,"deleted")}})}(jQuery),function(a){var b=a.hik.jtable.prototype._create,c=a.hik.jtable.prototype._addColumnsToHeaderRow,d=a.hik.jtable.prototype._addCellsToRowUsingRecord,e=a.hik.jtable.prototype._onLoadingRecords,f=a.hik.jtable.prototype._onRecordsLoaded,g=a.hik.jtable.prototype._onRowsRemoved;a.extend(!0,a.hik.jtable.prototype,{options:{selecting:!1,multiselect:!1,selectingCheckboxes:!1,selectOnRowClick:!0,selectionChanged:function(a,b){}},_selectedRecordIdsBeforeLoad:null,_$selectAllCheckbox:null,_shiftKeyDown:!1,_create:function(){this.options.selecting&&this.options.selectingCheckboxes&&(++this._firstDataColumnOffset,this._bindKeyboardEvents()),b.apply(this,arguments)},_bindKeyboardEvents:function(){var b=this;a(document).keydown(function(a){switch(a.which){case 16:b._shiftKeyDown=!0}}).keyup(function(a){switch(a.which){case 16:b._shiftKeyDown=!1}})},selectedRows:function(){return this._getSelectedRows()},selectRows:function(a){this._selectRows(a),this._onSelectionChanged()},_addColumnsToHeaderRow:function(a){this.options.selecting&&this.options.selectingCheckboxes&&(this.options.multiselect?a.append(this._createSelectAllHeader()):a.append(this._createEmptyCommandHeader())),c.apply(this,arguments)},_addCellsToRowUsingRecord:function(a){this.options.selecting&&this._makeRowSelectable(a),d.apply(this,arguments)},_onLoadingRecords:function(){this.options.selecting&&this._storeSelectionList(),e.apply(this,arguments)},_onRecordsLoaded:function(){this.options.selecting&&this._restoreSelectionList(),f.apply(this,arguments)},_onRowsRemoved:function(a,b){this.options.selecting&&"reloading"!=b&&0<a.filter(".jtable-row-selected").length&&this._onSelectionChanged(),g.apply(this,arguments)},_createSelectAllHeader:function(){var b=this,c=a('<th class=""></th>').addClass("jtable-command-column-header jtable-column-header-selecting");this._jqueryuiThemeAddClass(c,"ui-state-default");var d=a("<div />").addClass("jtable-column-header-container").appendTo(c);return b._$selectAllCheckbox=a('<input type="checkbox" />').appendTo(d).click(function(){if(0>=b._$tableRows.length)b._$selectAllCheckbox.attr("checked",!1);else{var a=b._$tableBody.find(">tr.jtable-data-row");b._$selectAllCheckbox.is(":checked")?b._selectRows(a):b._deselectRows(a),b._onSelectionChanged()}}),c},_storeSelectionList:function(){var b=this;b.options.selecting&&(b._selectedRecordIdsBeforeLoad=[],b._getSelectedRows().each(function(){b._selectedRecordIdsBeforeLoad.push(b._getKeyValueOfRecord(a(this).data("record")))}))},_restoreSelectionList:function(){if(this.options.selecting){for(var b=0,c=0;c<this._$tableRows.length;++c){var d=this._getKeyValueOfRecord(this._$tableRows[c].data("record"));-1<a.inArray(d,this._selectedRecordIdsBeforeLoad)&&(this._selectRows(this._$tableRows[c]),++b)}0<this._selectedRecordIdsBeforeLoad.length&&this._selectedRecordIdsBeforeLoad.length!=b&&this._onSelectionChanged(),this._selectedRecordIdsBeforeLoad=[],this._refreshSelectAllCheckboxState()}},_getSelectedRows:function(){return this._$tableBody.find(">tr.jtable-row-selected")},_makeRowSelectable:function(b){var c=this;if(c.options.selectOnRowClick&&b.click(function(){c._invertRowSelection(b)}),c.options.selectingCheckboxes){var d=a("<td></td>").addClass("jtable-selecting-column"),e=a('<input type="checkbox" />').appendTo(d);c.options.selectOnRowClick||e.click(function(){c._invertRowSelection(b)}),b.append(d)}},_invertRowSelection:function(a){if(a.hasClass("jtable-row-selected"))this._deselectRows(a);else if(this._shiftKeyDown){var b=this._findRowIndex(a),c=this._findFirstSelectedRowIndexBeforeIndex(b)+1;0<c&&c<b?this._selectRows(this._$tableBody.find("tr").slice(c,b+1)):(c=this._findFirstSelectedRowIndexAfterIndex(b)-1,c>b?this._selectRows(this._$tableBody.find("tr").slice(b,c+1)):this._selectRows(a))}else this._selectRows(a);this._onSelectionChanged()},_findFirstSelectedRowIndexBeforeIndex:function(a){for(a-=1;0<=a;--a)if(this._$tableRows[a].hasClass("jtable-row-selected"))return a;return-1},_findFirstSelectedRowIndexAfterIndex:function(a){for(a+=1;a<this._$tableRows.length;++a)if(this._$tableRows[a].hasClass("jtable-row-selected"))return a;return-1},_selectRows:function(a){this.options.multiselect||this._deselectRows(this._getSelectedRows()),a.addClass("jtable-row-selected"),this._jqueryuiThemeAddClass(a,"ui-state-highlight"),this.options.selectingCheckboxes&&a.find(">td.jtable-selecting-column >input").prop("checked",!0),this._refreshSelectAllCheckboxState()},_deselectRows:function(a){a.removeClass("jtable-row-selected ui-state-highlight"),this.options.selectingCheckboxes&&a.find(">td.jtable-selecting-column >input").prop("checked",!1),this._refreshSelectAllCheckboxState()},_refreshSelectAllCheckboxState:function(){if(this.options.selectingCheckboxes&&this.options.multiselect){var a=this._$tableRows.length,b=this._getSelectedRows().length;0==b?(this._$selectAllCheckbox.prop("indeterminate",!1),this._$selectAllCheckbox.attr("checked",!1)):b==a?(this._$selectAllCheckbox.prop("indeterminate",!1),this._$selectAllCheckbox.attr("checked",!0)):(this._$selectAllCheckbox.attr("checked",!1),this._$selectAllCheckbox.prop("indeterminate",!0))}},_onSelectionChanged:function(){this._trigger("selectionChanged",null,{})}})}(jQuery),function(a){var b=a.hik.jtable.prototype.load,c=a.hik.jtable.prototype._create,d=a.hik.jtable.prototype._setOption,e=a.hik.jtable.prototype._createRecordLoadUrl,f=a.hik.jtable.prototype._createJtParamsForLoading,g=a.hik.jtable.prototype._addRowToTable,h=a.hik.jtable.prototype._addRow,i=a.hik.jtable.prototype._removeRowsFromTable,j=a.hik.jtable.prototype._onRecordsLoaded;a.extend(!0,a.hik.jtable.prototype,{options:{paging:!1,pageList:"normal",pageSize:10,pageSizes:[10,25,50,100,250,500],pageSizeChangeArea:!0,gotoPageArea:"combobox",messages:{pagingInfo:"Showing {0}-{1} of {2}",pageSizeChangeLabel:"Row count",gotoPageLabel:"Go to page"}},_$bottomPanel:null,_$pagingListArea:null,_$pageSizeChangeArea:null,_$pageInfoSpan:null,_$gotoPageArea:null,_$gotoPageInput:null,_totalRecordCount:0,_currentPageNo:1,_create:function(){c.apply(this,arguments),this.options.paging&&(this._loadPagingSettings(),this._createBottomPanel(),this._createPageListArea(),this._createGotoPageInput(),this._createPageSizeSelection())},_loadPagingSettings:function(){if(this.options.saveUserPreferences){var a=this._getCookie("page-size");a&&(this.options.pageSize=this._normalizeNumber(a,1,1e6,this.options.pageSize))}},_createBottomPanel:function(){this._$bottomPanel=a("<div />").addClass("jtable-bottom-panel").insertAfter(this._$table),this._jqueryuiThemeAddClass(this._$bottomPanel,"ui-state-default"),a("<div />").addClass("jtable-left-area").appendTo(this._$bottomPanel),a("<div />").addClass("jtable-right-area").appendTo(this._$bottomPanel)},_createPageListArea:function(){this._$pagingListArea=a("<span></span>").addClass("jtable-page-list").appendTo(this._$bottomPanel.find(".jtable-left-area")),this._$pageInfoSpan=a("<span></span>").addClass("jtable-page-info").appendTo(this._$bottomPanel.find(".jtable-right-area"))},_createPageSizeSelection:function(){var b=this;if(b.options.pageSizeChangeArea){0>b._findIndexInArray(b.options.pageSize,b.options.pageSizes)&&(b.options.pageSizes.push(parseInt(b.options.pageSize)),b.options.pageSizes.sort(function(a,b){return a-b})),b._$pageSizeChangeArea=a("<span></span>").addClass("jtable-page-size-change").appendTo(b._$bottomPanel.find(".jtable-left-area")),b._$pageSizeChangeArea.append("<span>"+b.options.messages.pageSizeChangeLabel+": </span>");for(var c=a("<select></select>").appendTo(b._$pageSizeChangeArea),d=0;d<b.options.pageSizes.length;d++)c.append('<option value="'+b.options.pageSizes[d]+'">'+b.options.pageSizes[d]+"</option>");c.val(b.options.pageSize),c.change(function(){b._changePageSize(parseInt(a(this).val()))})}},_createGotoPageInput:function(){var b=this;b.options.gotoPageArea&&"none"!=b.options.gotoPageArea&&(this._$gotoPageArea=a("<span></span>").addClass("jtable-goto-page").appendTo(b._$bottomPanel.find(".jtable-left-area")),this._$gotoPageArea.append("<span>"+b.options.messages.gotoPageLabel+": </span>"),"combobox"==b.options.gotoPageArea?(b._$gotoPageInput=a("<select></select>").appendTo(this._$gotoPageArea).data("pageCount",1).change(function(){b._changePage(parseInt(a(this).val()))}),b._$gotoPageInput.append('<option value="1">1</option>')):b._$gotoPageInput=a('<input type="text" maxlength="10" value="'+b._currentPageNo+'" />').appendTo(this._$gotoPageArea).keypress(function(a){13==a.which?(a.preventDefault(),b._changePage(parseInt(b._$gotoPageInput.val()))):43==a.which?(a.preventDefault(),b._changePage(parseInt(b._$gotoPageInput.val())+1)):45==a.which?(a.preventDefault(),b._changePage(parseInt(b._$gotoPageInput.val())-1)):47<a.keyCode&&58>a.keyCode&&0==a.shiftKey&&0==a.altKey||8==a.keyCode||9==a.keyCode||a.preventDefault()}))},_refreshGotoPageInput:function(){if(this.options.gotoPageArea&&"none"!=this.options.gotoPageArea){if(0>=this._totalRecordCount?this._$gotoPageArea.hide():this._$gotoPageArea.show(),"combobox"==this.options.gotoPageArea){var a=this._$gotoPageInput.data("pageCount"),b=this._calculatePageCount();if(a!=b){this._$gotoPageInput.empty(),a=1,1e4<b?a=100:5e3<b?a=10:2e3<b?a=5:1e3<b&&(a=2);for(var c=a;c<=b;c+=a)this._$gotoPageInput.append('<option value="'+c+'">'+c+"</option>");this._$gotoPageInput.data("pageCount",b)}}this._$gotoPageInput.val(this._currentPageNo)}},load:function(){this._currentPageNo=1,b.apply(this,arguments)},_setOption:function(a,b){d.apply(this,arguments),"pageSize"==a&&this._changePageSize(parseInt(b))},_changePageSize:function(a){if(a!=this.options.pageSize){this.options.pageSize=a;var b=this._calculatePageCount();this._currentPageNo>b&&(this._currentPageNo=b),0>=this._currentPageNo&&(this._currentPageNo=1),b=this._$bottomPanel.find(".jtable-page-size-change select"),0<b.length&&parseInt(b.val())!=a&&0<b.find("option[value="+a+"]").length&&b.val(a),this._savePagingSettings(),this._reloadTable()}},_savePagingSettings:function(){this.options.saveUserPreferences&&this._setCookie("page-size",this.options.pageSize)},_createRecordLoadUrl:function(){var a=e.apply(this,arguments);return a=this._addPagingInfoToUrl(a,this._currentPageNo)},_createJtParamsForLoading:function(){var a=f.apply(this,arguments);return this.options.paging&&(a.jtStartIndex=(this._currentPageNo-1)*this.options.pageSize,a.jtPageSize=this.options.pageSize),a},_addRowToTable:function(a,b,c){c&&this.options.paging?this._reloadTable():g.apply(this,arguments)},_addRow:function(a,b){b&&b.isNewRow&&this.options.paging?this._reloadTable():h.apply(this,arguments)},_removeRowsFromTable:function(a,b){i.apply(this,arguments),this.options.paging&&(0>=this._$tableRows.length&&1<this._currentPageNo&&--this._currentPageNo,this._reloadTable())},_onRecordsLoaded:function(a){this.options.paging&&(this._totalRecordCount=a.TotalRecordCount,this._createPagingList(),this._createPagingInfo(),this._refreshGotoPageInput()),j.apply(this,arguments)},_addPagingInfoToUrl:function(a,b){if(!this.options.paging)return a;var c=(b-1)*this.options.pageSize,d=this.options.pageSize;return a+(0>a.indexOf("?")?"?":"&")+"jtStartIndex="+c+"&jtPageSize="+d},_createPagingList:function(){if(!(0>=this.options.pageSize||(this._$pagingListArea.empty(),0>=this._totalRecordCount))){var a=this._calculatePageCount();this._createFirstAndPreviousPageButtons(),"normal"==this.options.pageList&&this._createPageNumberButtons(this._calculatePageNumbers(a)),this._createLastAndNextPageButtons(a),this._bindClickEventsToPageNumberButtons()}},_createFirstAndPreviousPageButtons:function(){var b=a("<span></span>").addClass("jtable-page-number-first").html("&lt&lt").data("pageNumber",1).appendTo(this._$pagingListArea),c=a("<span></span>").addClass("jtable-page-number-previous").html("&lt").data("pageNumber",this._currentPageNo-1).appendTo(this._$pagingListArea);this._jqueryuiThemeAddClass(b,"ui-button ui-state-default","ui-state-hover"),this._jqueryuiThemeAddClass(c,"ui-button ui-state-default","ui-state-hover"),1>=this._currentPageNo&&(b.addClass("jtable-page-number-disabled"),c.addClass("jtable-page-number-disabled"),this._jqueryuiThemeAddClass(b,"ui-state-disabled"),this._jqueryuiThemeAddClass(c,"ui-state-disabled"))},_createLastAndNextPageButtons:function(b){var c=a("<span></span>").addClass("jtable-page-number-next").html("&gt").data("pageNumber",this._currentPageNo+1).appendTo(this._$pagingListArea),d=a("<span></span>").addClass("jtable-page-number-last").html("&gt&gt").data("pageNumber",b).appendTo(this._$pagingListArea);this._jqueryuiThemeAddClass(c,"ui-button ui-state-default","ui-state-hover"),this._jqueryuiThemeAddClass(d,"ui-button ui-state-default","ui-state-hover"),this._currentPageNo>=b&&(c.addClass("jtable-page-number-disabled"),d.addClass("jtable-page-number-disabled"),this._jqueryuiThemeAddClass(c,"ui-state-disabled"),this._jqueryuiThemeAddClass(d,"ui-state-disabled"))},_createPageNumberButtons:function(b){for(var c=0,d=0;d<b.length;d++)1<b[d]-c&&a("<span></span>").addClass("jtable-page-number-space").html("...").appendTo(this._$pagingListArea),this._createPageNumberButton(b[d]),c=b[d]},_createPageNumberButton:function(b){var c=a("<span></span>").addClass("jtable-page-number").html(b).data("pageNumber",b).appendTo(this._$pagingListArea);this._jqueryuiThemeAddClass(c,"ui-button ui-state-default","ui-state-hover"),this._currentPageNo==b&&(c.addClass("jtable-page-number-active jtable-page-number-disabled"),this._jqueryuiThemeAddClass(c,"ui-state-active"))},_calculatePageCount:function(){var a=Math.floor(this._totalRecordCount/this.options.pageSize);return 0!=this._totalRecordCount%this.options.pageSize&&++a,a},_calculatePageNumbers:function(a){if(4>=a){for(var b=[],c=1;c<=a;++c)b.push(c);return b}return b=[1,2,a-1,a],c=this._normalizeNumber(this._currentPageNo-1,1,a,1),a=this._normalizeNumber(this._currentPageNo+1,1,a,1),this._insertToArrayIfDoesNotExists(b,c),this._insertToArrayIfDoesNotExists(b,this._currentPageNo),this._insertToArrayIfDoesNotExists(b,a),b.sort(function(a,b){return a-b}),b},_createPagingInfo:function(){if(0>=this._totalRecordCount)this._$pageInfoSpan.empty();else{var a=(this._currentPageNo-1)*this.options.pageSize+1,b=this._currentPageNo*this.options.pageSize,b=this._normalizeNumber(b,a,this._totalRecordCount,0);b>=a&&(a=this._formatString(this.options.messages.pagingInfo,a,b,this._totalRecordCount),this._$pageInfoSpan.html(a))}},_bindClickEventsToPageNumberButtons:function(){var b=this;b._$pagingListArea.find(".jtable-page-number,.jtable-page-number-previous,.jtable-page-number-next,.jtable-page-number-first,.jtable-page-number-last").not(".jtable-page-number-disabled").click(function(c){c.preventDefault(),b._changePage(a(this).data("pageNumber"))})},_changePage:function(a){a=this._normalizeNumber(a,1,this._calculatePageCount(),1),a==this._currentPageNo?this._refreshGotoPageInput():(this._currentPageNo=a,this._reloadTable())}})}(jQuery),function(a){var b=a.hik.jtable.prototype._initializeFields,c=a.hik.jtable.prototype._normalizeFieldOptions,d=a.hik.jtable.prototype._createHeaderCellForField,e=a.hik.jtable.prototype._createRecordLoadUrl,f=a.hik.jtable.prototype._createJtParamsForLoading;a.extend(!0,a.hik.jtable.prototype,{options:{sorting:!1,multiSorting:!1,defaultSorting:""},_lastSorting:null,_initializeFields:function(){b.apply(this,arguments),this._lastSorting=[],this.options.sorting&&this._buildDefaultSortingArray()},_normalizeFieldOptions:function(a,b){c.apply(this,arguments),b.sorting=0!=b.sorting},_createHeaderCellForField:function(a,b){var c=d.apply(this,arguments);return this.options.sorting&&b.sorting&&this._makeColumnSortable(c,a),c},_createRecordLoadUrl:function(){var a=e.apply(this,arguments);return a=this._addSortingInfoToUrl(a)},_buildDefaultSortingArray:function(){var b=this;a.each(b.options.defaultSorting.split(","),function(c,d){a.each(b.options.fields,function(a,c){if(c.sorting){var e=d.indexOf(a);-1<e&&(-1<d.toUpperCase().indexOf(" DESC",e)?b._lastSorting.push({fieldName:a,sortOrder:"DESC"}):b._lastSorting.push({fieldName:a,sortOrder:"ASC"}))}})})},_makeColumnSortable:function(b,c){var d=this;b.addClass("jtable-column-header-sortable").click(function(a){a.preventDefault(),d.options.multiSorting&&a.ctrlKey||(d._lastSorting=[]),d._sortTableByColumn(b)}),a.each(this._lastSorting,function(a,d){d.fieldName==c&&("DESC"==d.sortOrder?b.addClass("jtable-column-header-sorted-desc"):b.addClass("jtable-column-header-sorted-asc"))})},_sortTableByColumn:function(a){0==this._lastSorting.length&&a.siblings().removeClass("jtable-column-header-sorted-asc jtable-column-header-sorted-desc");for(var b=0;b<this._lastSorting.length;b++)this._lastSorting[b].fieldName==a.data("fieldName")&&this._lastSorting.splice(b--,1);a.hasClass("jtable-column-header-sorted-asc")?(a.removeClass("jtable-column-header-sorted-asc").addClass("jtable-column-header-sorted-desc"),this._lastSorting.push({fieldName:a.data("fieldName"),sortOrder:"DESC"})):(a.removeClass("jtable-column-header-sorted-desc").addClass("jtable-column-header-sorted-asc"),this._lastSorting.push({fieldName:a.data("fieldName"),sortOrder:"ASC"})),this._reloadTable()},_addSortingInfoToUrl:function(b){if(!this.options.sorting||0==this._lastSorting.length)return b;var c=[];return a.each(this._lastSorting,function(a,b){c.push(b.fieldName+" "+b.sortOrder)}),b+(0>b.indexOf("?")?"?":"&")+"jtSorting="+c.join(",")},_createJtParamsForLoading:function(){var b=f.apply(this,arguments);if(this.options.sorting&&this._lastSorting.length){var c=[];a.each(this._lastSorting,function(a,b){c.push(b.fieldName+" "+b.sortOrder)}),b.jtSorting=c.join(",")}return b}})}(jQuery),function(a){var b=a.hik.jtable.prototype._create,c=a.hik.jtable.prototype._normalizeFieldOptions,d=a.hik.jtable.prototype._createHeaderCellForField,e=a.hik.jtable.prototype._createCellForRecordField;a.extend(!0,a.hik.jtable.prototype,{options:{tableId:void 0,columnResizable:!0,columnSelectable:!0},_$columnSelectionDiv:null,_$columnResizeBar:null,_cookieKeyPrefix:null,_currentResizeArgs:null,_create:function(){b.apply(this,arguments),this._createColumnResizeBar(),this._createColumnSelection(),this.options.saveUserPreferences&&this._loadColumnSettings(),this._normalizeColumnWidths()},_normalizeFieldOptions:function(a,b){c.apply(this,arguments),this.options.columnResizable&&(b.columnResizable=0!=b.columnResizable),b.visibility||(b.visibility="visible")},_createHeaderCellForField:function(a,b){var c=d.apply(this,arguments);return this.options.columnResizable&&b.columnResizable&&a!=this._columnList[this._columnList.length-1]&&this._makeColumnResizable(c),"hidden"==b.visibility&&c.hide(),c},_createCellForRecordField:function(a,b){var c=e.apply(this,arguments);return"hidden"==this.options.fields[b].visibility&&c.hide(),c},changeColumnVisibility:function(a,b){this._changeColumnVisibilityInternal(a,b),this._normalizeColumnWidths(),this.options.saveUserPreferences&&this._saveColumnSettings()},_changeColumnVisibilityInternal:function(a,b){var c=this._columnList.indexOf(a);if(0>c)this._logWarn('Column "'+a+'" does not exist in fields!');else if(0>["visible","hidden","fixed"].indexOf(b))this._logWarn('Visibility value is not valid: "'+b+'"! Options are: visible, hidden, fixed.');else{var d=this.options.fields[a];d.visibility!=b&&(c=this._firstDataColumnOffset+c+1,"hidden"!=d.visibility&&"hidden"==b?this._$table.find(">thead >tr >th:nth-child("+c+"),>tbody >tr >td:nth-child("+c+")").hide():"hidden"==d.visibility&&"hidden"!=b&&this._$table.find(">thead >tr >th:nth-child("+c+"),>tbody >tr >td:nth-child("+c+")").show().css("display","table-cell"),d.visibility=b)}},_createColumnSelection:function(){var b=this;this._$columnSelectionDiv=a("<div />").addClass("jtable-column-selection-container").appendTo(b._$mainContainer),this._$table.children("thead").bind("contextmenu",function(c){if(b.options.columnSelectable){c.preventDefault(),a("<div />").addClass("jtable-contextmenu-overlay").click(function(){a(this).remove(),b._$columnSelectionDiv.hide()}).bind("contextmenu",function(){return!1}).appendTo(document.body),b._fillColumnSelection();var d=b._$mainContainer.offset(),e=c.pageY-d.top;c=c.pageX-d.left,d=b._$mainContainer.width(),100<d&&c>d-100&&(c=d-100),b._$columnSelectionDiv.css({left:c,top:e,"min-width":"100px"}).show()}})},_fillColumnSelection:function(){for(var b=this,c=a("<ul></ul>").addClass("jtable-column-select-list"),d=0;d<this._columnList.length;d++){var e=this._columnList[d],f=this.options.fields[e],g=a("<li></li>").appendTo(c),g=a('<label for="'+e+'"></label>').append(a("<span>"+(f.title||e)+"</span>")).appendTo(g),e=a('<input type="checkbox" name="'+e+'">').prependTo(g).click(function(){var c=a(this),d=c.attr("name");"fixed"!=b.options.fields[d].visibility&&b.changeColumnVisibility(d,c.is(":checked")?"visible":"hidden")});"hidden"!=f.visibility&&e.attr("checked","checked"),"fixed"==f.visibility&&e.attr("disabled","disabled")}this._$columnSelectionDiv.html(c)},_createColumnResizeBar:function(){this._$columnResizeBar=a("<div />").addClass("jtable-column-resize-bar").appendTo(this._$mainContainer).hide()},_makeColumnResizable:function(b){var c=this;a("<div />").addClass("jtable-column-resize-handler").appendTo(b.find(".jtable-column-header-container")).mousedown(function(d){d.preventDefault(),d.stopPropagation();var e=c._$mainContainer.offset(),f=b.nextAll("th.jtable-column-header:visible:first");if(f.length){c._currentResizeArgs={currentColumnStartWidth:b.outerWidth(),minWidth:10,maxWidth:b.outerWidth()+f.outerWidth()-10,mouseStartX:d.pageX,minResizeX:function(){return this.mouseStartX-(this.currentColumnStartWidth-this.minWidth)},maxResizeX:function(){return this.mouseStartX+(this.maxWidth-this.currentColumnStartWidth)}};var g=function(a){c._currentResizeArgs&&(a=c._normalizeNumber(a.pageX,c._currentResizeArgs.minResizeX(),c._currentResizeArgs.maxResizeX()),c._$columnResizeBar.css("left",a-e.left+"px"))},h=function(d){if(c._currentResizeArgs){a(document).unbind("mousemove",g),a(document).unbind("mouseup",h),c._$columnResizeBar.hide(),d=c._normalizeNumber(c._currentResizeArgs.currentColumnStartWidth+(d.pageX-c._currentResizeArgs.mouseStartX),c._currentResizeArgs.minWidth,c._currentResizeArgs.maxWidth);var e=f.outerWidth()+(c._currentResizeArgs.currentColumnStartWidth-d),i=b.data("width-in-percent")/c._currentResizeArgs.currentColumnStartWidth;b.data("width-in-percent",d*i),f.data("width-in-percent",e*i),b.css("width",b.data("width-in-percent")+"%"),f.css("width",f.data("width-in-percent")+"%"),c._normalizeColumnWidths(),c._currentResizeArgs=null,c.options.saveUserPreferences&&c._saveColumnSettings()}};c._$columnResizeBar.show().css({top:b.offset().top-e.top+"px",left:d.pageX-e.left+"px",height:c._$table.outerHeight()+"px"}),a(document).bind("mousemove",g),a(document).bind("mouseup",h)}})},_normalizeColumnWidths:function(){var b=this._$table.find(">thead th.jtable-command-column-header").data("width-in-percent",1).css("width","1%"),c=this._$table.find(">thead th.jtable-column-header"),d=0;c.each(function(){var b=a(this);b.is(":visible")&&(d+=b.outerWidth())});var e={},f=100-b.length;c.each(function(){var b=a(this);if(b.is(":visible")){var c=b.data("fieldName"),b=b.outerWidth()*f/d;e[c]=b}}),c.each(function(){var b=a(this);if(b.is(":visible")){var c=b.data("fieldName");b.data("width-in-percent",e[c]).css("width",e[c]+"%")}})},_saveColumnSettings:function(){var b=this,c="";this._$table.find(">thead >tr >th.jtable-column-header").each(function(){var d=a(this),e=d.data("fieldName"),d=d.data("width-in-percent");c=c+(e+"="+b.options.fields[e].visibility+";"+d)+"|"}),this._setCookie("column-settings",c.substr(0,c.length-1));
},_loadColumnSettings:function(){var b=this,c=this._getCookie("column-settings");if(c){var d={};a.each(c.split("|"),function(a,b){var c=b.split("="),e=c[0],c=c[1].split(";");d[e]={columnVisibility:c[0],columnWidth:c[1]}}),this._$table.find(">thead >tr >th.jtable-column-header").each(function(){var c=a(this),e=c.data("fieldName"),f=b.options.fields[e];d[e]&&("fixed"!=f.visibility&&b._changeColumnVisibilityInternal(e,d[e].columnVisibility),c.data("width-in-percent",d[e].columnWidth).css("width",d[e].columnWidth+"%"))})}}})}(jQuery),function(a){var b=a.hik.jtable.prototype._removeRowsFromTable;a.extend(!0,a.hik.jtable.prototype,{options:{openChildAsAccordion:!1},openChildTable:function(b,c,d){var e=this;void 0==c.jqueryuiTheme&&(c.jqueryuiTheme=e.options.jqueryuiTheme),c.showCloseButton=0!=c.showCloseButton,c.showCloseButton&&!c.closeRequested&&(c.closeRequested=function(){e.closeChildTable(b)}),e.options.openChildAsAccordion&&b.siblings(".jtable-data-row").each(function(){e.closeChildTable(a(this))}),e.closeChildTable(b,function(){var f=e.getChildRow(b).children("td").empty(),g=a("<div />").addClass("jtable-child-table-container").appendTo(f);f.data("childTable",g),g.jtable(c),e.openChildRow(b),g.hide().slideDown("fast",function(){d&&d({childTable:g})})})},closeChildTable:function(a,b){var c=this,d=this.getChildRow(a).children("td"),e=d.data("childTable");e?(d.data("childTable",null),e.slideUp("fast",function(){e.jtable("destroy"),e.remove(),c.closeChildRow(a),b&&b()})):b&&b()},isChildRowOpen:function(a){return this.getChildRow(a).is(":visible")},getChildRow:function(a){return a.data("childRow")||this._createChildRow(a)},openChildRow:function(a){return a=this.getChildRow(a),a.is(":visible")||a.show(),a},closeChildRow:function(a){a=this.getChildRow(a),a.is(":visible")&&a.hide()},_removeRowsFromTable:function(c,d){"deleted"==d&&c.each(function(){var b=a(this).data("childRow");b&&b.remove()}),b.apply(this,arguments)},_createChildRow:function(b){var c=this._$table.find("thead th").length,c=a("<tr></tr>").addClass("jtable-child-row").append('<td colspan="'+c+'"></td>');return b.after(c),b.data("childRow",c),c.hide(),c}})}(jQuery),function(a){a.extend(!0,a.hik.jtable.prototype.options.messages,{serverCommunicationError:"Erreur de communication avec le serveur.",loadingMessage:"Chargement des données...",noDataAvailable:"Aucune donnée !",addNewRecord:"Ajouter",editRecord:"Editer",areYouSure:"Etes-vous sûr ?",deleteConfirmation:"Cet enregistrement sera supprimé. Continuer ?",save:"Sauvegarder",saving:"Sauvegarde en cours...",cancel:"Annuler",deleteText:"Supprimer",deleting:"Supression en cours...",error:"Erreur",close:"Fermer",cannotLoadOptionsFor:"Impossible de charger les données du champ {0}",pagingInfo:"Afficher {0} à {1} de {2}",canNotDeletedRecords:"Impossible de supprimer {0} sur {1} enregistrement(s)!",deleteProggress:"Supression {0} sur {1} enregistrement(s), en cours d'exécution...",pageSizeChangeLabel:"Nombre d'enregistrements",gotoPageLabel:"Aller à la page"})}(jQuery)});