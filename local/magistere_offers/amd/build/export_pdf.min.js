define(["jquery","jqueryui","local_magistere_offers/jquery.loadingModal"],function(a){function b(){a("a.pdf-catalog").on("click",function(b){b.preventDefault(),a("body").loadingModal({position:"auto",text:"Génération du catalogue en cours",color:"#fff",opacity:"0.7",backgroundColor:"rgb(0,0,0)",animation:"circle"}),a.get(a(this).attr("href"),function(b){console.log(b),"false"==b.error?(location.href=b.url,a("body").loadingModal("hide"),setTimeout(function(){a("body").loadingModal("destroy")},1e3)):(a("body").loadingModal("text","La génération du catalogue a échouée"),setTimeout(function(){a("body").loadingModal("hide")},2e3),setTimeout(function(){a("body").loadingModal("destroy")},3e3))},"json")})}return{init:function(){b()}}});